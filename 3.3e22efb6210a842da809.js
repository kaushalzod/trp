(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{kJkI:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return m});var i=n("fXoL"),o=n("3Pt+"),s=n("itXk"),r=n("lJxs"),a=n("tk/3");const l=function(e){return $.summernote.ui.button({contents:'<i class="note-icon-frame" style="margin-right: 4px"></i> Code block',tooltip:"Add code block",container:".note-editor",className:"note-btn",click:function(){let t=null;window.getSelection&&(t=window.getSelection().toString().replace(/^\s+|\s+$/g,"")),e.invoke("editor.pasteHTML",`<pre class="code-block" style="font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\nfont-size: 12px;\npadding: 14px 12px;\nmargin-bottom: 12px;\nline-height: 1.42857;\nword-break: break-all;\noverflow-wrap: break-word;\nbackground-color: rgb(250, 251, 253);\nborder: 1px solid rgb(234, 236, 240);\nborder-radius: 4px; color: #60a0b0;\nwhite-space: pre-wrap;">${t||"Place your code here."}</pre>`)}}).render()};let u=(()=>{class e{constructor(e,t,n){this.el=e,this.zone=t,this.http=n,this.summernoteModelChange=new i.n,this.imageUpload=new i.n,this.mediaDelete=new i.n,this.blur=new i.n,this._options={},this.SPECIAL_TAGS=["img","button","input","a"],this.INNER_HTML_ATTR="innerHTML",this._oldModel=null,this.onChange=e=>{},this.onTouched=()=>{},-1!==this.SPECIAL_TAGS.indexOf(e.nativeElement.tagName.toLowerCase())&&(this._hasSpecialTag=!0),this.zone=t}set ngxSummernote(e){e&&(e.buttons||(e.buttons={}),e.callbacks=Object.assign({},e.callbacks,{onImageUpload:e=>this.uploadImage(e),onMediaDelete:e=>this.mediaDelete.emit({url:$(e[0]).attr("src")})}),e.buttons.codeBlock=l,Object.assign(this._options,e))}set summernoteModel(e){this.updateEditor(e)}ngOnInit(){this.createEditor()}ngOnChanges(e){this._editorInitialized&&e&&e.ngxSummernoteDisabled&&!e.ngxSummernoteDisabled.firstChange&&e.ngxSummernoteDisabled.currentValue!==e.ngxSummernoteDisabled.previousValue&&this._$element.summernote(e.ngxSummernoteDisabled.currentValue?"disable":"enable")}ngOnDestroy(){this.destroyEditor(),this.uploadSub&&this.uploadSub.unsubscribe()}writeValue(e){this.updateEditor(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}updateEditor(e){JSON.stringify(this._oldModel)!==JSON.stringify(e)&&(this._oldModel=e,this._editorInitialized?this._$element.summernote("code",e):this._$element.html(e))}updateModel(e){this.zone.run(()=>{let t=null;if(this._hasSpecialTag){const e=this._$element[0].attributes,n={};for(let t=0;t<e.length;t++){const i=e[t].name;this._options.angularIgnoreAttrs&&-1!==this._options.angularIgnoreAttrs.indexOf(i)||(n[i]=e[t].value)}this._$element[0].innerHTML&&(n[this.INNER_HTML_ATTR]=this._$element[0].innerHTML),t=n}else{const n=e||"";"string"==typeof n&&(t=n)}this._oldModel=t,this.summernoteModelChange.emit(t),this.onChange(e)})}initListeners(){const e=this;this._$element&&(this._$element.on("summernote.init",function(){setTimeout(function(){e.updateModel()},0)}),this._$element.on("summernote.change",function(t,n,i){setTimeout(function(){e.updateModel(n)},0)}),this._$element.on("summernote.blur",function(){setTimeout(function(){e.onTouched(),e.blur.emit()},0)}),this._options.immediateAngularModelUpdate&&this._editor.on("keyup",function(){setTimeout(function(){e.updateModel()},0)}))}createEditor(){if(!this._editorInitialized){this.setContent(!0);try{this._$element=$(this.el.nativeElement)}catch(e){console.log("JQuery seems not te loaded yet! Wait 50ms and try again")}this._$element?(this.zone.runOutsideAngular(()=>{this._editor=this._$element.summernote(this._options).data("summernote").$note,this.initListeners(),this.ngxSummernoteDisabled&&this._$element.summernote("disable")}),this._editorInitialized=!0):setTimeout(()=>{this.createEditor()},50)}}setHtml(){this._$element.summernote("code",this._model||"",!0)}setContent(e=!1){if(this._model||""===this._model)if(this._oldModel=this._model,this._hasSpecialTag){const e=this._model;if(e){for(const t in e)e.hasOwnProperty(t)&&t!==this.INNER_HTML_ATTR&&this._$element.attr(t,e[t]);e.hasOwnProperty(this.INNER_HTML_ATTR)&&(this._$element[0].innerHTML=e[this.INNER_HTML_ATTR])}}else this.setHtml()}destroyEditor(){this._editorInitialized&&(this._editor.off("keyup"),this._$element.summernote("destroy"),this._editorInitialized=!1)}uploadImage(e){return t=this,void 0,i=function*(){if(this._options.uploadImagePath){this.imageUpload.emit({uploading:!0});const t=[];for(const n of e){const e=new FormData;e.append("image",n);const i=this.http.post(this._options.uploadImagePath,e).pipe(Object(r.a)(e=>e&&"string"==typeof e.path&&e.path));t.push(i)}this.uploadSub=Object(s.a)(t).subscribe(e=>{for(const t of e)this._$element.summernote("insertImage",t);this.imageUpload.emit({uploading:!1})},t=>this.insertFromDataURL(e))}else this.insertFromDataURL(e)},new((n=void 0)||(n=Promise))(function(e,o){function s(e){try{a(i.next(e))}catch(t){o(t)}}function r(e){try{a(i.throw(e))}catch(t){o(t)}}function a(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n(function(e){e(i)})).then(s,r)}a((i=i.apply(t,[])).next())});var t,n,i}insertFromDataURL(e){for(const t of e){const e=new FileReader;e.readAsDataURL(t),e.onload=()=>{this._$element.summernote("insertImage",e.result),this.imageUpload.emit({uploading:!1,encoding:"base64"})},e.onerror=e=>console.error(e)}}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(i.l),i.Kb(i.z),i.Kb(a.a))},e.\u0275dir=i.Fb({type:e,selectors:[["","ngxSummernote",""]],inputs:{ngxSummernote:"ngxSummernote",summernoteModel:"summernoteModel",ngxSummernoteDisabled:"ngxSummernoteDisabled"},outputs:{summernoteModelChange:"summernoteModelChange",imageUpload:"imageUpload",mediaDelete:"mediaDelete",blur:"blur"},features:[i.yb([{provide:o.i,useExisting:Object(i.T)(()=>e),multi:!0}]),i.xb]}),e})(),m=(()=>{class e{constructor(e,t){this.renderer2=e,this._element=t.nativeElement}set ngxSummernoteView(e){this._element.innerHTML=e||""}ngAfterViewInit(){this.renderer2.addClass(this._element,"ngx-summernote-view")}}return e.\u0275fac=function(t){return new(t||e)(i.Kb(i.E),i.Kb(i.l))},e.\u0275dir=i.Fb({type:e,selectors:[["","ngxSummernoteView",""]],inputs:{ngxSummernoteView:"ngxSummernoteView"}}),e})(),d=(()=>{class e{static forRoot(){return{ngModule:e,providers:[]}}}return e.\u0275mod=i.Ib({type:e}),e.\u0275inj=i.Hb({factory:function(t){return new(t||e)}}),e})()}}]);